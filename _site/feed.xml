<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>包丁一本さらしに巻いて</title>
		<description>Python + Data</description>
		<link>http://achiku.github.io</link>
		<atom:link href="http://achiku.github.io/feed.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>カンムを支える技術</title>
				<description>&lt;p&gt;入社して4ヶ月くらいたったので一旦まとめておきます。 フォーマットはどこかで見たことがある形ですが、その通りです。 完全に参考にさせて頂いてます。&lt;/p&gt;

&lt;h1 id=&quot;&quot;&gt;仕事&lt;/h1&gt;

&lt;p&gt;クレジットカード会社様と協力し、オンラインカード明細にクーポンを出してます。&lt;/p&gt;

&lt;p&gt;サービスの詳細は以下から。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://kanmu.co.jp/advertisers&quot;&gt;Kanmu Card Linked Offer&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;_2&quot;&gt;組織&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;社長&lt;/li&gt;

&lt;li&gt;デザイナー&lt;/li&gt;

&lt;li&gt;営業&lt;/li&gt;

&lt;li&gt;総務&lt;/li&gt;

&lt;li&gt;エンジニアA&lt;/li&gt;

&lt;li&gt;エンジニアB&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;計6名&lt;/p&gt;

&lt;p&gt;achikuはエンジニアBです。エンジニア絶賛募集中です！&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://kanmu.co.jp/jobs/engineer&quot;&gt;https://kanmu.co.jp/jobs/engineer&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;_3&quot;&gt;言語&lt;/h1&gt;

&lt;h2 id=&quot;python&quot;&gt;Python&lt;/h2&gt;

&lt;p&gt;カンムが提供するプロダクト全てに利用されています。特に強制しているわけではないのですが、今のところ全てPythonでまかなえているため、 今後もPythonで行けるところまで行く予定です。3.xへは利用しているWeb Application Frameworkが対応するタイミングで移行を考えています。(Django 1.7から)&lt;/p&gt;

&lt;p&gt;エンジニア3人(社長含む)は全員Python好きです。&lt;/p&gt;

&lt;h2 id=&quot;coffeescript&quot;&gt;CoffeeScript&lt;/h2&gt;

&lt;p&gt;フロント側はCoffeeScriptで書かれています。JavaScriptで書かれていた部分も最近置き換えました。正直自分はまだしっかりCoffeeScriptを把握できてないので今後じっとり触っていきたいです。&lt;/p&gt;

&lt;h2 id=&quot;sass&quot;&gt;Sass&lt;/h2&gt;

&lt;p&gt;フロント側のマークアップは全てSassに移行しました。デザイナーが主に利用してます。バックエンドの人でも学習コストそんなに高くなく利用できて重宝してます。 CoffeeScriptと合わせてgruntを使ってコンパイルするスタンダードな使い方。最近はカンム独自CSSフレームワークを作成中で近日公開予定です。&lt;/p&gt;

&lt;h2 id=&quot;hiveql&quot;&gt;HiveQL&lt;/h2&gt;

&lt;p&gt;ログはAmazon EMR上にHadoop + Hiveを立ち上げて集計し、S3に格納後、DBに入れる方式をとっています。現在絶賛リファクタ中で、ログ集計基盤の設計方針ベストプラクティスを研究中。&lt;/p&gt;

&lt;h2 id=&quot;scheme&quot;&gt;Scheme&lt;/h2&gt;

&lt;p&gt;SICPの勉強用に利用。&lt;/p&gt;

&lt;h2 id=&quot;restructuredtext&quot;&gt;reStructuredText&lt;/h2&gt;

&lt;p&gt;主にプロジェクトのドキュメント用に利用しています。GitHubの自動レンダリングにお任せしており、Sphinxは現在利用していません。お客さん用のマニュアルの類が必要になった際は使う予定。&lt;/p&gt;

&lt;h2 id=&quot;markdown&quot;&gt;markdown&lt;/h2&gt;

&lt;p&gt;GitHubとTrello使う時は大抵markdownにお世話になってます。&lt;/p&gt;

&lt;h1 id=&quot;_4&quot;&gt;環境&lt;/h1&gt;

&lt;h2 id=&quot;os&quot;&gt;OS&lt;/h2&gt;

&lt;p&gt;Ubuntuの最新版をメインで利用しています。&lt;/p&gt;

&lt;h2 id=&quot;packer&quot;&gt;Packer&lt;/h2&gt;

&lt;p&gt;ローカルで使うBoxファイル生成に利用しています。時雨堂さんのPacker Templateを利用中。 &lt;a href=&quot;https://github.com/shiguredo/packer-templates&quot;&gt;shiguredo/packer-templates&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;vagrant&quot;&gt;Vagrant&lt;/h2&gt;

&lt;p&gt;VirtualBoxと組み合わせて、ローカルに環境を作成する際に利用しています。VMWareは使ってみたいですが、まだ未検証のステータスです。&lt;/p&gt;

&lt;h2 id=&quot;virtualbox&quot;&gt;VirtualBox&lt;/h2&gt;

&lt;p&gt;Vagrantで仮想環境を作るために利用。&lt;/p&gt;

&lt;h2 id=&quot;fabric&quot;&gt;Fabric&lt;/h2&gt;

&lt;p&gt;まだ管理すべきサーバ台数 x 種類が小さい為、プロビジョニングもデプロイもFabricを利用しています。fabtoolsと併用することで、スタンダードなインストール/設定は非常に簡潔に書けて気に入っています。また、トランザクションが多い部分はAWS Elastic Beanstalkを利用しており、デプロイの度にAMIからサーバを作りなおしているので冪等性があんまり関係ないってのもあります。&lt;/p&gt;

&lt;p&gt;ただし、今後サービスが拡大し、管理するサーバの種類と台数が増えた際には、インストールするパッケージの種類やサーバの役割等を細かくモジュール化して管理していく為の別の選択肢作っておきたいため、Ansibleを少しずつ触り始めています。&lt;/p&gt;

&lt;h1 id=&quot;_5&quot;&gt;サービス&lt;/h1&gt;

&lt;h2 id=&quot;google_apps&quot;&gt;Google Apps&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;GMail&lt;/li&gt;

&lt;li&gt;Google Calendar&lt;/li&gt;

&lt;li&gt;Google Drive&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;trello&quot;&gt;Trello&lt;/h2&gt;

&lt;p&gt;今年に入ったくらいから導入し、まだ運用方法に関しては試行錯誤中の部分もありますが、だいぶ軌道に乗ってきました。UserVoiceという会社の使い方の中から、”Current Development Board”の部分を抜粋して利用してます。3人で約2週間に一度機能追加、デザインA/Bテストをリリースし続けている現在の開発スタイルにはマッチしてますが、今後もずっとこのスタイルを続けるかどうかは引き続き検討中です。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://community.uservoice.com/blog/trello-google-docs-product-management/&quot;&gt;How we use Trello &amp;amp; Google Docs to make UserVoice better every day&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Trelloを採用した際の要件抜粋&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;人軸で何をやっているのか、タスク総量がどれくらいなのかがすぐわかる(メンバーをアサインしてフィルタ)&lt;/li&gt;

&lt;li&gt;次のリリースまでに何が完了していないといけないのかすぐわかる(NextUpボード参照)&lt;/li&gt;

&lt;li&gt;今何が終わってて何が終わってないのかがすぐわかる(In Progress, QAボード参照)&lt;/li&gt;

&lt;li&gt;バグ、新機能、リファクタのタスクがすぐわかる(ラベルを使って対応)&lt;/li&gt;

&lt;li&gt;安い(今はお金があんまり無い)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;タスクの進捗だけではなく、機能追加時のディスカッションや、各リリース毎の振り返り(KPT)にも利用できて重宝してます。コードに直接関係しない部分は、後述するGitHubのIssueよりもこちらで議論する事が多いです。&lt;/p&gt;

&lt;h2 id=&quot;scrum_for_trello&quot;&gt;Scrum for Trello&lt;/h2&gt;

&lt;p&gt;ChromeのエクステンションとしてScrum for Trelloを入れています。これを入れるとTrelloの各カードに対して予定と実績が入力できるようになります。予実の差分を毎週チェックし、クオリティーとスピードのバランスがとれたリリースができるようにチーム内で話し合ってます。&lt;/p&gt;

&lt;h2 id=&quot;hipchat&quot;&gt;HipChat&lt;/h2&gt;

&lt;p&gt;非常に重宝しているチャットサービス。営業からエンジニア勢への相談事項、お知らせ、エンジニア間のコミュニケーションは込み入ったものでなければ全てこの中で完結させています。また、後述のdrone.ioからビルドの通知を、GitHubからはPush時/コメント時/PR作成時にノーティフィケーションを流すようにしています。&lt;/p&gt;

&lt;p&gt;原則ココさえ見ておけばエンジニアは生活できるように、あらゆるサービスのノーティフィケーションを流すようにしてく予定です。&lt;/p&gt;

&lt;h2 id=&quot;droneio&quot;&gt;drone.io&lt;/h2&gt;

&lt;p&gt;CIツールとして利用しています。非常にシンプルに設定を記述できる、且つ廉価なのでセットアップは楽なのですが、いかんせんノーティフィケーションの方法がメールだけなのが痛い。一応ビルド成功時にHipChat側に通知を送るように仕込んでいるのですが、知りたいのはむしろビルド失敗時だったりして、そうするとHipChatのAPIを叩けなかったりと色々難儀です。&lt;/p&gt;

&lt;p&gt;現在乗り換えを検討中。&lt;/p&gt;

&lt;h2 id=&quot;github&quot;&gt;GitHub&lt;/h2&gt;

&lt;p&gt;ほぼ全てのリポジトリはGitHub上においてあります。技術的な相談、指摘、質問は全てプルリクエスト内で実施。新機能追加時には、設計の内容認識合わせをした後にWIP(work in progress)のPRを作成して、そこでの議論をベースに改善していく形をとっています。また、ChromeのMISAWA:MDを利用させて頂いており、殺伐とした議論にイラつきと若干の和みを同時に投入する習慣がついています。&lt;/p&gt;

&lt;p&gt;GitHub Issueはアサインされている人軸で絞り込めず、誰が何をやっているのかの把握とタスク分配がやりにくいので、バグ、機能追加の仕様等は全てTrelloに集約しています。&lt;/p&gt;

&lt;h2 id=&quot;amazon_web_services&quot;&gt;Amazon Web Services&lt;/h2&gt;

&lt;p&gt;大変お世話になってます。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;VPC&lt;/li&gt;

&lt;li&gt;EC2&lt;/li&gt;

&lt;li&gt;S3&lt;/li&gt;

&lt;li&gt;Elastic Beanstalk&lt;/li&gt;

&lt;li&gt;Elastic MapReduce&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;sentry&quot;&gt;Sentry&lt;/h2&gt;

&lt;p&gt;現在試験的に利用中。&lt;/p&gt;

&lt;h2 id=&quot;new_relic&quot;&gt;New Relic&lt;/h2&gt;

&lt;p&gt;現在試験的に利用中。 すごいいいんですけどお高いんですよね。ちなみにこの前アメリカのNew Relicから電話かかってきてmoquada氏がテンパッてました。&lt;/p&gt;</description>
				<pubDate>Mon, 31 Mar 2014 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2014/03/31/kanmu-tech.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2014/03/31/kanmu-tech.html</guid>
			</item>
		
			<item>
				<title>Mac 10.9 Mervericsでpip install PILが失敗する</title>
				<description>&lt;p&gt;Mac OSX 10.9.1、Python 2.7.5でpipを利用したPILのインストールが失敗する。 OSアップグレード前はうまくいっていた。&lt;/p&gt;

&lt;h2 id=&quot;&quot;&gt;エラー詳細&lt;/h2&gt;

&lt;p&gt;どうやらヘッダファイルが無いらしい。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;building &amp;#39;_imagingft&amp;#39; extension

cc -fno-strict-aliasing -fno-common -dynamic -I/usr/local/include -I/usr/local/opt/sqlite/include -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/System/Library/Frameworks/Tcl.framework/Headers -I/System/Library/Frameworks/Tk.framework/Headers -I/usr/local/include/freetype2 -IlibImaging -I/Users/achiku/.virtualenvs/pil/include -I/usr/local/include -I/usr/include -I/usr/local/Cellar/python/2.7.5/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _imagingft.c -o build/temp.macosx-10.7-x86_64-2.7/_imagingft.o

_imagingft.c:73:10: fatal error: &amp;#39;freetype/fterrors.h&amp;#39; file not found

#include &amp;lt;freetype/fterrors.h&amp;gt;

         ^

1 error generated.

error: command &amp;#39;cc&amp;#39; failed with exit status 1&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2 id=&quot;_2&quot;&gt;対応&lt;/h2&gt;

&lt;p&gt;結論から言うと、イメージ上のフォントを弄るfreetypeをbrew経由でインストールし、PILコンパイル時に見える位置にシンボリックリンクを貼って再度pip installすることで解決。&lt;/p&gt;
&lt;div class=&#39;highlight&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;nv&#39;&gt;$ &lt;/span&gt;brew install freetype
&lt;span class=&#39;nv&#39;&gt;$ &lt;/span&gt;ln -s /usr/local/Cellar/freetype/2.5.1/include/freetype2 /usr/local/include/freetype
&lt;span class=&#39;nv&#39;&gt;$ &lt;/span&gt;pip install PIL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;_3&quot;&gt;参考/こんなになった経緯等&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/20325473/error-installing-python-image-library-using-pip-on-mac-os-x-10-9&quot;&gt;Error installing Python Image Library using pip on Mac OS X 10.9&lt;/a&gt;&lt;/p&gt;</description>
				<pubDate>Mon, 27 Jan 2014 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2014/01/27/mac-109-mervericpippil.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2014/01/27/mac-109-mervericpippil.html</guid>
			</item>
		
			<item>
				<title>今日のVimキーマップ</title>
				<description>&lt;p&gt;MacVimで長い文章を書く際に劇的に役立つキーマップ。これを入れておく事で1行なのにGUI上改行されている改行も、通常のj,kで移動できる！ @seizans の.vimrcから拝借しました。&lt;/p&gt;
&lt;div class=&#39;highlight&#39;&gt;&lt;pre&gt;&lt;code class=&#39;vim&#39;&gt;&lt;span class=&#39;nb&#39;&gt;nnoremap&lt;/span&gt; &lt;span class=&#39;k&#39;&gt;j&lt;/span&gt; gj
&lt;span class=&#39;nb&#39;&gt;nnoremap&lt;/span&gt; &lt;span class=&#39;k&#39;&gt;k&lt;/span&gt; gk 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
				<pubDate>Tue, 19 Nov 2013 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2013/11/19/todays-vim-keymap.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2013/11/19/todays-vim-keymap.html</guid>
			</item>
		
			<item>
				<title>転職しました</title>
				<description>&lt;p&gt;5年間お世話になったアクセンチュアを卒業し、本日より株式会社カンムで働きます。&lt;/p&gt;

&lt;p&gt;思い返せばゴミ虫のごとく無能なのに、「俺が日本で適当に大学生活送ってきた輩どもに負けるわけねー。どいつもこいつも雑魚ばっかだ。」とか比較的本気で信じてた22歳でした。恥ずかし過ぎて鼻血がでますが、そんな無邪気な万能感は、ファーストアサインで木っ端微塵に吹っ飛び、ちょっと仕事を覚えては新しいジョブにアサインされ、懲りずに調子に乗り、調子に乗ったまま守備範囲を広げ、自分から広げたくせにボコボコになり、鼻っ柱というか脊椎の辺りからバックリ折られて呆然とする、という事を繰り返してここまできました。&lt;/p&gt;

&lt;p&gt;この5年間、自分の目指すスーパーな姿と実際のミジンコクラスの実力の断絶に、何度も嫌気がさし、嫌気が差しては飲んだくれ、歌を歌い、ちょっと泣き、また次の仕事に取り組んできました。そうやって振り返った時思い出すのは、やはりお世話になりまくった上司、チームは全然違うのに飲むときはやたら一緒にいる先輩や後輩、事ある毎に飲み会を開く同期達です。&lt;/p&gt;

&lt;p&gt;皆さんと働けて、自分の5年間は本当に幸せでした。&lt;/p&gt;

&lt;p&gt;本当にありがとうございました。&lt;/p&gt;

&lt;p&gt;アクセンチュアで働き続ける事もきっとすごく面白い事なのでしょうが、ただ、もっと作りたくなってしまいました。自分の頭で考えたものを自分の手で実装する。自分の中でサービスやプロダクトを作るということは、各人がもっている「世はかくあれかし」という精神を実装する事だと思っています。カンムはまだ小さい会社ですが「世はかくあれかし」を持っています。ただ持っているだけではなく、作る、ということがどういうことが知っている会社だと思います。いいものを作るという事は、綺麗に整理整頓された思想や精神性だけで行える事ではなく、底なし沼ばりにドロドロしたトレードオフ、血の滴るような戦術レベルの意思決定、ヒリヒリするような関係各所の利害関係調整など、時に目をそむけたくなるようなものも沢山あるのです。&lt;/p&gt;

&lt;p&gt;そんな鉄火場で、自分の核にある技術を使い、尊敬できるチームと一緒に「いいものを！」と叫びながら働きまくる。そういうことを新しい場所で全力でやってみたいと感じ、最終的な転職を決めました。&lt;/p&gt;

&lt;p&gt;お世話になった皆様方。&lt;/p&gt;

&lt;p&gt;知久は今後もバチバチに仕事とどつきあってきます。&lt;/p&gt;

&lt;p&gt;へこんでたら、酒とレッドブルを注入してください。&lt;/p&gt;

&lt;p&gt;あとミスチル。&lt;/p&gt;

&lt;p&gt;5年間、本当にありがとうございました！！&lt;/p&gt;

&lt;p&gt;今後ともよろしくお願いします！！&lt;/p&gt;</description>
				<pubDate>Mon, 18 Nov 2013 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2013/11/18/job.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2013/11/18/job.html</guid>
			</item>
		
			<item>
				<title>AWS: EIP + VPC + NAT + ELB + EC2 + RDS #1</title>
				<description>&lt;p&gt;Amazonの提供するクラウド系サービスを利用してひと通りの環境を構築してみる。作りたいのはパブリックなサブネットとプライベートなサブネットに分割し、Public側にNAT Instance + ELB + 踏み台サーバを配置、Private側にWeb/APサーバ + RDSを置く、という構成。DMZとDC内部、的な構成でやってみようと思います。本当はDC内部はVPNつないでみたいけど、今回は踏み台サーバを用意してプライベート側のEC2にログインして作業する構成とする。&lt;/p&gt;

&lt;p&gt;キャプチャは取らない方式でまとめます。&lt;/p&gt;

&lt;h2 id=&quot;&quot;&gt;アカウント作成&lt;/h2&gt;

&lt;p&gt;まずはAWS用のアカウントを作成する。既にAmazonのアカウント持っている人はそのアカウントにAWSアカウントをひもづける事が可能。アカウント作成時に必要なものは住所、電話（アカウント作成時に電話で認証をとっている）、クレジットカード情報。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://aws.amazon.com/jp/&quot;&gt;Amazon Web Service&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;vpc&quot;&gt;VPC&lt;/h2&gt;

&lt;p&gt;Amazon Virtual Private Cloudの略。要はいつもオンプレミスでやっているようなNWレイヤでのセキュリティコントロールや、ルーティングやサブネットの分割がAWS上でもできるということ。設定したVPC上にEC2等のAWSオブジェクトを作成していく。また、今回はやらないけど、既存のデータセンターとの間にHardware VPN(IPsec VPN)を使って接続することもできる。うーむ。便利。以下VPCのサイトから引用。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Amazon VPC のネットワーク設定は容易にカスタマイズすることができます。例えば、インターネットとのアクセスが可能なウェブサーバーのパブリック サブネットを作成し、データベースやアプリケーションサーバーなどのバックエンドシステムをインターネットとのアクセスを許可していないプライベート サブネットに配置できます。セキュリティグループやネットワークアクセスコントロールリストなどの複数のセキュリティレイヤーを活用し、各サブネットの Amazon EC2 インスタンスへのアクセスをコントロールすることができます。&lt;a href=&quot;http://aws.amazon.com/jp/vpc/&quot;&gt;Amazon VPC公式サイトから引用&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;VPCのコントロールパネルを開く。Start VPC Wizardをクリックしてウィザード開始。 VPC with Public and Private Subnetsを選択。デフォルトの選択のまま、Create VPCを実行。&lt;/p&gt;

&lt;p&gt;そうすると作成されるものが以下。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;VPC x 1&lt;/li&gt;

&lt;li&gt;Subnet x 2&lt;/li&gt;

&lt;li&gt;Route Table x 2&lt;/li&gt;

&lt;li&gt;Internet Gate Way x 1&lt;/li&gt;

&lt;li&gt;Elastic IP x 1&lt;/li&gt;

&lt;li&gt;EC2 NAT Instance x 1&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;NAT Instanceは普通にEC2のインスタンス作成時にNATインスタンス用にAMIを選択したやつっぽい。最初NATのサービスを探してた。AMI IDは、amzn-ami-vpc-nat-pv-2013.03.1.x86_64-ebs。&lt;/p&gt;

&lt;p&gt;NATは外部と通信するためGlobal IPが必要なので、VPCウィザード先輩が自動的にElastic IPを振り出しNATインスタンスに割り当てている模様。先輩はいい感じにやってくれる。&lt;/p&gt;

&lt;p&gt;更に先輩は、2つ作ったサブネットの内、一つのデフォゲをInternet Gateway、もう一つのサブネットのデフォゲを自動的に作成したNATに設定してくれる。これでInternet Gatewayがデフォゲに指定されている方がパブリックサブネット、いわゆるDMZ的なものになる。一方で、NATがデフォゲに指定されている方がプライベートサブネット、というくくりになる。&lt;/p&gt;

&lt;h2 id=&quot;bastion_serverec2&quot;&gt;Bastion Server(EC2)&lt;/h2&gt;

&lt;p&gt;EC2のマネジメントコンソールから新規にEC2インスタンスを作成する。 この際、踏み台サーバはPublicサブネットに配置する。というか踏み台サーバの事をBastion Host/Serverという事を今日始めて知りました。ばすちょん。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.sans.org/security-resources/idfaq/bastion.php&quot;&gt;What is a bastion host?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;作成が完了すると、pem形式のキーの名前を聞かれるので適当に命名。ダウンロードしたpem keyをローカルに配置し、以下のコマンドを実行してBastionサーバに接続できることを確認する。pem keyを何単位で分けるのが適切かは、セキュリティと運用の容易さのトレードオフで決めるのかな。今回は一つのpem keyで全てのサーバにアクセスできるようにしておく。本当は本番/ステージング別とか、プライベート/パブリックサブネット別とかに分けるのだろう。&lt;/p&gt;
&lt;div class=&#39;highlight&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;    &lt;span class=&#39;nv&#39;&gt;$ &lt;/span&gt;ssh -i tokyoPemKey.pem ubuntu@your-ec2-domain.compute.amazonaws.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;ap_serverec2&quot;&gt;AP Server(EC2)&lt;/h2&gt;

&lt;p&gt;EC2のマネジメントコンソールから新規にEC2インスタンスを作成する。 この際、APサーバはPrivateサブネットに配置する。VPCをウィザードで作成すると、自動的に10.0.1.0/24がプライベートなサブネット（Default GawtewayがNATインスタンスになってるやつ）になっているっぽい。逆に、10.0.0.0/24がパブリックになっており、Default GatewayにはInternet Gatewayが指定されている。よって、Configuration Instance Detailsから以下の設定を実施する。それ以外はデフォルトで問題なし。プライベートなサブネットに配置するので、Public IPとかは設定しないでよし。ちなみに今回はUbuntu Server 13.10 - ami-b945ddb8を利用。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Network: 10.0.0.0/16&lt;/li&gt;

&lt;li&gt;Subnet: subnet-xxxxx(10.0.1.0/24)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;load_balancerec2_elb&quot;&gt;Load Balancer(EC2, ELB)&lt;/h2&gt;

&lt;p&gt;EC2ダッシュボードに行くと、左側のNETWORK&amp;amp;SECURITYタグの中にLoad Balancerという項目があるので、ここから新規作成する。&lt;/p&gt;

&lt;p&gt;適当な名前をつける。 Create LB Inside:の部分は新規に作成したVPCを選択。今回の場合は、10.0.0.0/16。 LBが通すプロトコルとポートを指定する。今回はデフォルトのHTTPとポート80番のみ。 ヘルスチェックはデフォルトのまま。&lt;/p&gt;

&lt;p&gt;ロードバランス「される」インスタンスが存在するサブネットを選択する。今回はAPサーバをPrivateサブネット（Internet Gatewayがついてない方のサブネット）に配置しているので、そちらを選択。デフォルトでは、10.0.1.0/24。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;You will need to select a Subnet for each Availability Zone where you wish to have load balanced instances. A Virtual Network Interface will be placed inside the Subnet and allow traffic to be routed into that Availability Zone. Only one subnet per Availability Zone may be selected.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;セキュリティグループは一旦デフォルト。&lt;/p&gt;

&lt;dl&gt;
&lt;dt&gt;作成完了したら、EC2のマネジメントコンソール左ペインからLoad Balancerを選択して新規作成されたレコードを確認。Instancesに先ほど作成したAP Serverをひもづける。コレで以下の通信経路の基礎が完成。次回はSecurity Groupの設定を行い、APサーバに実際のWebアプリをデプロイする！&lt;/dt&gt;

&lt;dd&gt;
&lt;p&gt;:&lt;/p&gt;

&lt;p&gt;[client] -&amp;gt; [ELB] -&amp;gt; [Web/AP Server]&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;</description>
				<pubDate>Mon, 04 Nov 2013 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2013/11/04/aws-vpc-nat-elb-ec2.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2013/11/04/aws-vpc-nat-elb-ec2.html</guid>
			</item>
		
			<item>
				<title>Github Pages開始</title>
				<description>&lt;p&gt;心機一転、七転抜刀！&lt;/p&gt;

&lt;p&gt;Github Pages + jekyll + Pureで作りました。主にPythonやデータ分析界隈の話が書ければと思います。今は過去に書いていた記事をサルベージして移行中。それにしてもこのGithub Pageを軸にした組み合わせ神すぎる。若干の根性があれば広告なし、容量制限も気にせず、なんならバックアップも取得してもらえるブログサービスが作れてしまう。。。&lt;/p&gt;

&lt;p&gt;Github, jekyll, Pure本当にありがとうございます！&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://pages.github.com/&quot;&gt;Github Pages&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://jekyllrb.com/&quot;&gt;jekyll&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;a href=&quot;http://purecss.io/&quot;&gt;Pure&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
				<pubDate>Sun, 03 Nov 2013 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2013/11/03/start-blog.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2013/11/03/start-blog.html</guid>
			</item>
		
			<item>
				<title>chcsvというツールがすごい</title>
				<description>&lt;p&gt;このツール超便利だ。Oracle DBを標準入出力で操れる。Linux/GNU最高。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.asahi-net.or.jp/~nq7t-kwbt/&quot;&gt;ORACLEの部屋&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;tarボールをダウンロードしてきてmakeしてみたけど、そのままでは利用できなかったので、11gR2、Exaでも使えるmakeつくってみた。標準装備のmakeを分解してるだけ。&lt;/p&gt;
&lt;div class=&#39;highlight&#39;&gt;&lt;pre&gt;&lt;code class=&#39;basemake&#39;&gt;&lt;span class=&#39;nv&#39;&gt;ORAHOME&lt;/span&gt; &lt;span class=&#39;o&#39;&gt;=&lt;/span&gt; &lt;span class=&#39;k&#39;&gt;${&lt;/span&gt;&lt;span class=&#39;nv&#39;&gt;ORACLE_HOME&lt;/span&gt;&lt;span class=&#39;k&#39;&gt;}&lt;/span&gt;
&lt;span class=&#39;nv&#39;&gt;OBJS&lt;/span&gt; &lt;span class=&#39;o&#39;&gt;=&lt;/span&gt; chcsv.o sqlda.o Option.o OutPut.o Signal.o

&lt;span class=&#39;nf&#39;&gt;build &lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;chcsv&lt;/span&gt;

&lt;span class=&#39;nf&#39;&gt;chcsv &lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;$(OBJS)&lt;/span&gt;
  gcc -o chcsv &lt;span class=&#39;k&#39;&gt;$(&lt;/span&gt;OBJS&lt;span class=&#39;k&#39;&gt;)&lt;/span&gt; -L&lt;span class=&#39;k&#39;&gt;$(&lt;/span&gt;ORAHOME&lt;span class=&#39;k&#39;&gt;)&lt;/span&gt;/lib/   -lclntsh -lclntst11 &lt;span class=&#39;sb&#39;&gt;`&lt;/span&gt;cat &lt;span class=&#39;k&#39;&gt;$(&lt;/span&gt;ORAHOME&lt;span class=&#39;k&#39;&gt;)&lt;/span&gt;/lib/ldflags&lt;span class=&#39;sb&#39;&gt;`&lt;/span&gt;   &lt;span class=&#39;sb&#39;&gt;`&lt;/span&gt;cat &lt;span class=&#39;k&#39;&gt;$(&lt;/span&gt;ORAHOME&lt;span class=&#39;k&#39;&gt;)&lt;/span&gt;lib/sysliblist&lt;span class=&#39;sb&#39;&gt;`&lt;/span&gt; -ldl -lm

&lt;span class=&#39;nf&#39;&gt;chcsv.c&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt;  &lt;span class=&#39;m&#39;&gt;chcsv.pc&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;chcsv.o&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt;  &lt;span class=&#39;m&#39;&gt;chcsv.c&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;Option.c&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;Option.pc&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;Option.o&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;Option.c&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;OutPut.c&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;OutPut.pc&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;OutPut.o&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;OutPut.c&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;Signal.c&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;Signal.pc&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;Signal.o&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;Signal.c&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;sqlda.c&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt;  &lt;span class=&#39;m&#39;&gt;sqlda.pc&lt;/span&gt;
&lt;span class=&#39;nf&#39;&gt;sqlda.o&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt;  &lt;span class=&#39;m&#39;&gt;sqlda.c&lt;/span&gt;

&lt;span class=&#39;nf&#39;&gt;%.o&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;%.c &lt;/span&gt;
  gcc -O -c &lt;span class=&#39;nv&#39;&gt;$&amp;lt;&lt;/span&gt; -o &lt;span class=&#39;nv&#39;&gt;$@&lt;/span&gt;

&lt;span class=&#39;nf&#39;&gt;%.c&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt; &lt;span class=&#39;m&#39;&gt;%.pc&lt;/span&gt;
  proc &lt;span class=&#39;nv&#39;&gt;$&amp;lt;&lt;/span&gt;

&lt;span class=&#39;nf&#39;&gt;clean&lt;/span&gt;&lt;span class=&#39;o&#39;&gt;:&lt;/span&gt;
  /bin/rm -f *.o *.c *.lis chcsv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
				<pubDate>Sat, 04 Sep 2010 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2010/09/04/chcsv.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2010/09/04/chcsv.html</guid>
			</item>
		
			<item>
				<title>関数的であるということ</title>
				<description>&lt;p&gt;イマイチしっくりとこなかったんだけど、Pythonを使ってみて何となく、ほんのちょこっと関数的であるということが分かってきた気がする。今自分が実感できる「関数的」なことは大きく分けると二つ。1.抽象化する、2.手続きではなく定義を書く&lt;/p&gt;

&lt;p&gt;こっから先はプログラミング歴2年の、しかも仕事でプログラミングあんましてない趣味プログラマが書くことなので、色々間違い・勘違い等含まれていると思うので注意して読まれたし。&lt;/p&gt;

&lt;h3 id=&quot;&quot;&gt;抽象化する&lt;/h3&gt;

&lt;p&gt;以前にもkshで関数的に書くっていうエントリを書いた。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/2009/07/08/pragmatic-functional-programming.html&quot;&gt;プラグマティック関数プログラミング&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;言いたい事はほぼ、このエントリの中にあるんだけど、もう一度まとめる。プログラムがおおきくなるにつれて、プログラムを変更、追加する必要がある場面が増える。そういった時に簡単に変更、追加を行えるようにプログラム同士はなるべく緩くつながっていて欲しいという需要がでてきた。緩くつながるってのはどういうことか。簡単に言うと「取り替えるのが簡単」ってことだ。オブジェクト指向はこの取り替えがなるべく簡単にできるように、クラス、オブジェクト、継承ってのを使ってアプローチしている。関数的なものは、言うに及ばず、関数を使ってこの「取り替えるのが簡単」っていうベネフィットにアプローチする。以下、上記エントリの引用。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;上のスクリプトが言っているのは「二つ目の引数で与えられたディレクトリ以下のファイルにほげほげしろ」ってこと。この「ほげほげ」って部分が第一引数になる。「二つ目の引数で与えられたディレクトリ以下のファイルにほげほげしろ」っていう指示は抽象的である。抽象的であるが故に「ほげほげ」の部分を自由に組み替えることができる。それはつまり、拡張性・再利用性が高いってことだ。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;つまり、「ほげほげ」の部分を空白にしておくことで、いろんな関数を取り替え可能にしておく事ができる。この様にして関数的なプログラミング言語は「取り替えるのが簡単」っていう利点を作り出している。&lt;/p&gt;

&lt;h3 id=&quot;_2&quot;&gt;手続きではなく定義を書く&lt;/h3&gt;

&lt;p&gt;これは最近自分でしっくりきた感覚。感覚なので、なかなか伝えるのが難しいんだけど、トライしてみます。「手続き」っていうのは、「アレとコレを比べる。比べた結果、アレの方が大きかった場合、foo処理をする。比べた結果、コレの方が大きかった場合、bar処理をする。」っていう機械に語りかけるような、そんな感じのものだと認識している。関数的なものの場合、「foo処理とは、アレとコレを比べてアレの方が大きい場合の処理。bar処理とはアレとコレを比べてコレの方が大きい場合の処理。」ってな感じ。。。だんだん怪しくなってきた。。。たぶんどっちでやっても同じような事をするプログラムは書けるんだろうと思う。&lt;/p&gt;

&lt;p&gt;書いてたらわからんくなってきた。一時中断する。またなんかふといい説明方法が思いついたら書く！&lt;/p&gt;

&lt;p&gt;どなたかわかりやすげな説明できる方、よろしくお願いします！ひろくんとか！&lt;/p&gt;</description>
				<pubDate>Sat, 30 Jan 2010 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2010/01/30/functional-programming.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2010/01/30/functional-programming.html</guid>
			</item>
		
			<item>
				<title>制限と想像力</title>
				<description>&lt;p&gt;シェルが楽しい。強力なオブジェクト指向プログラミングも、関数型プログラミングもできない。インターフェースは標準入力、標準出力と標準エラー出力。一時データはフラットファイル。フラットファイルにどういう形式でデータを一時保存しておくと後で取り出しやすいか。なんかフラットファイルを介してオブジェクト指向プログラミングもできそうな気がする（タブ区切りのプロパティの中にメソッドのあるパスとか指定してevalとか。あ、xml形式にして保存しとくと後で取り出しやすいとか。）。&lt;/p&gt;

&lt;p&gt;多分制限て楽しいんだと思う。工夫ができるから。&lt;/p&gt;

&lt;p&gt;PerlもPythonもRubyも自分には扱いきれないほど高度な機能を死ぬほどもってる。俺がなんかやる余地ないよね。なんか使われてる感じがする。&lt;/p&gt;

&lt;p&gt;最初は「なんでこんな原始時代の言語を学ばねばならんのだ」って思ってたけど、シェルって楽しいなー。つかLinuxのソフトウェアツールが楽しいのかな。ズビッって欲しいデータが綺麗なフォーマットで出力されるとうれしいし。&lt;/p&gt;

&lt;p&gt;今、シェルを学べてよかった。&lt;/p&gt;

&lt;p&gt;いい基礎になる。&lt;/p&gt;

&lt;p&gt;なんてったって枯れてるからね。いいもんごちそうになります。&lt;/p&gt;</description>
				<pubDate>Mon, 05 Oct 2009 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2009/10/05/creativity-lives-in-restrictions.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2009/10/05/creativity-lives-in-restrictions.html</guid>
			</item>
		
			<item>
				<title>Linux/GNUがカッコよすぎて勃起</title>
				<description>&lt;p&gt;まだ全くの初学者ではあるが、すげーと思ったことがいくつかある。&lt;/p&gt;

&lt;h3 id=&quot;&quot;&gt;インターフェースがシンプル且つ柔軟であること。&lt;/h3&gt;

&lt;p&gt;[command][options] [arg1 arg2 ..] 引数はファイル名の時もあるし、数字の時もあるし、文字列の時もある。 情報は標準入力、標準出力、標準エラー出力と既にあるファイルから。 全てのコマンドがこの形態を持っている。&lt;/p&gt;

&lt;h3 id=&quot;_2&quot;&gt;コマンド（ソフトウェア？？ツール？？）の粒度と数。&lt;/h3&gt;

&lt;p&gt;ls, sed, grep, find, cut, uniqu, sort, tr, cd, awk, dd, set, print, ….. それぞれが自分の守備範囲を適切に守っている（使い方によっては代用ももちろんできるけど）。さらにその数と質は長年いろんな人たちがメンテしてきただけあって、使用頻度の高いものはいわゆる「枯れた」もので安心してプロダクトの中で使用できる。&lt;/p&gt;

&lt;p&gt;コマンドを組み合わせる事が簡単。&lt;/p&gt;

&lt;p&gt;パイプ、アンパサンドなどで無数にあるコマンドを簡単に組み合わすことができる。粒度が適切なので組み合わせはさらにシンプルかつ柔軟になる。&lt;/p&gt;

&lt;h3 id=&quot;_3&quot;&gt;シェルスクリプトの存在。&lt;/h3&gt;

&lt;p&gt;感動した言葉の一つに「シェルはLinux・Unixをプログラミングするものだ」というものがある。いろんなコマンドを糊付けして、一つの「ツール」にしてしまうって意味だと解釈している。奥に進めば進む程いろんな事ができる事がわかる。（シェルだって関数プログラミング的にかける！）もちろんLLは素晴らしいし、楽しいと思うけど、別にPerlやPython使う程でもないけど、サクッと必要、とかいった場合にシェルかけるのは便利。&lt;/p&gt;

&lt;p&gt;んー。すごいわ。みんなかっこいいわ。&lt;/p&gt;</description>
				<pubDate>Sun, 09 Aug 2009 00:00:00 +0000</pubDate>
				<link>http://achiku.github.io//2009/08/09/great-linux-and-gnu.html</link>
				<guid isPermaLink="true">http://achiku.github.io//2009/08/09/great-linux-and-gnu.html</guid>
			</item>
		
	</channel>
</rss>
